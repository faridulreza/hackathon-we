{"version":3,"file":"contentScript.0edb5fd572059dc6cbbb.hot-update.js","mappings":";;;;;;;;AAAA;;AACA;AAGA;AACA;AACA;AAAA;AAGA;;AAEA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AAEA;AAEA;AACA;;AAEA;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;;AAEA;AAEA;AADA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;;;;ACnFA","sources":["webpack://chrome-extension-boilerplate-react/./src/pages/Content/index.js","webpack://chrome-extension-boilerplate-react/webpack/runtime/getFullHash"],"sourcesContent":["const INTERVAL = 5000; //ms\nconst API =\n  \"https://3e8d-2400-a7c0-8000-b-a6b3-3db2-d082-fbcb.in.ngrok.io/api/v1/predict\";\n\nconst video = document.createElement(\"video\");\ndocument.body.append(video);\nconst cnv = document.createElement(\"canvas\"),\n  ctx = cnv.getContext(\"2d\");\n\ndocument.body.append(cnv);\n\nasync function loadCIndex(base64data) {\n  try {\n    var createCORSRequest = function (method, url) {\n      var xhr = new XMLHttpRequest();\n      if (\"withCredentials\" in xhr) {\n        // Most browsers.\n        xhr.open(method, url, true);\n      } else if (typeof XDomainRequest != \"undefined\") {\n        // IE8 & IE9\n        xhr = new XDomainRequest();\n        xhr.open(method, url);\n      } else {\n        // CORS not supported.\n        xhr = null;\n      }\n      return xhr;\n    };\n\n    var url =\n      \"https://b329-2400-a7c0-8000-b-a6b3-3db2-d082-fbcb.in.ngrok.io/api/v1/predict\";\n    var method = \"POST\";\n    var xhr = createCORSRequest(method, url);\n\n    xhr.onload = function () {\n      // Success code goes here.\n    };\n\n    xhr.onerror = function () {\n      decide(-1);\n    };\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == XMLHttpRequest.DONE) {\n        decide(JSON.parse(xhr.responseText).res);\n      }\n    };\n\n    xhr.send(JSON.stringify({ image: base64data }));\n  } catch (e) {\n    console.log(e);\n    decide(-1);\n  }\n}\n\nasync function decide(CI) {\n  console.log(CI, { video });\n}\n\nfunction attentionMonitor() {\n  cnv.width = video.videoWidth;\n  cnv.height = video.videoHeight;\n  ctx.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n  let data = cnv.toDataURL(\"image/png\");\n  data = data.split(\",\")[1];\n\n  loadCIndex(data);\n\n  setTimeout(attentionMonitor, INTERVAL);\n}\n\nnavigator.mediaDevices\n  .getUserMedia({\n    video: true,\n  })\n  .then((stream) => {\n    console.log(\"Got Permission\");\n    video.srcObject = stream;\n    video.play();\n    attentionMonitor();\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n","__webpack_require__.h = () => (\"fc0c492403c4ccb7b7f5\")"],"names":[],"sourceRoot":""}