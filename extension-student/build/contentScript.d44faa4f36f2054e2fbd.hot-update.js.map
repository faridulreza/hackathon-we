{"version":3,"file":"contentScript.d44faa4f36f2054e2fbd.hot-update.js","mappings":";;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AACA;AACA;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AADA;AAGA;AACA;AACA;;AAEA;;;;;;;;AC1CA","sources":["webpack://chrome-extension-boilerplate-react/./src/pages/Content/modules/decider.js","webpack://chrome-extension-boilerplate-react/webpack/runtime/getFullHash"],"sourcesContent":["import { db, rdb, firebase } from \"../../../../firebase\";\r\n\r\nlet startTime = null;\r\nlet endTime = null;\r\nlet totalCIValue = 0;\r\nlet totalCIcnt = 0;\r\nlet realtimeRef = null;\r\nlet attentionRef = null;\r\n\r\nasync function pushAttentionInterval() {}\r\n\r\nexport async function setRefs(uid, attention_id) {\r\n  realtimeRef = rdb.ref(uid);\r\n  attentionRef = db.collection(\"attentions\").doc(attention_id);\r\n}\r\n\r\nasync function decide(CI) {\r\n  if (startTime == null) {\r\n    startTime = Date.now();\r\n    totalCIValue = totalCIcnt = 0;\r\n  }\r\n  totalCIValue += CI;\r\n  totalCIcnt++;\r\n\r\n  let timePassed = Date.now() - startTime;\r\n  realtimeRef.set(totalCIValue / totalCIcnt);\r\n\r\n  if (timePassed >= 5 * 60 * 1000) {\r\n    endTime = Date.now();\r\n    let d = {\r\n      startTime,\r\n      endTime,\r\n      value: totalCIValue / totalCIcnt,\r\n    };\r\n\r\n    attentionRef.update({\r\n      attentions: firebase.firestore.FieldValue.arrayUnion(d),\r\n    });\r\n    startTime = null;\r\n  }\r\n}\r\n\r\nexport default decide;\r\n","__webpack_require__.h = () => (\"8cf27eb7a1609e3f5840\")"],"names":[],"sourceRoot":""}